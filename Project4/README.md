Repository for Project 4
========================

The collaborators for this project has been

*Lars Kristian Skaar*

*Brage Brevig*

*HÃ¥kon Lindholm*

## COMPILING AND RUNNING
To compile the main program, run the file main.py found in ./Code/ with
~~~
python3 main.py
~~~
This will compile and execute the C++ program. First the program will ask whether the code should run with parallelization or not. After this, the program will ask for necessary
input variables. The example in each prompt gives an idea of which values are acceptable. Program should run without parallelization for runs with a single temperature and a 
small number of Monte Carlo cycles, and with parallelization when a temperature interval is wanted and a large amount of MCS (>10000). The program will also ask for the number of
cores to use when running with parallelization.

In order to run the program with parallelization you need to install the following packages for MPI:
~~~
sudo apt-get install libopenmpi-dev
sudo apt-get install openmpi-bin
~~~
for linux and 
~~~
brew install open-mpi
~~~
for macOS

#### Manual compilation
Should the C++ program need to be compiled manually this has been done with mpic++ and --std=c++11 for the parallelized version, and g++ for the non parallelized version. An 
-O3 flag should be used in either case for vectorization purposes.

<ins>Parallelized:</ins>
~~~
mpic++ --std=c++11 -O3 -o main.out ./cpp_code/main_parallel.cpp
~~~
and run with
~~~
mpirun -n num_procs ./main.out dim mcs tmin tmax tstep
~~~
where 

**num_procs** = number of cores to run in parallel

**dim** = dimensionality of lattice

**mcs** = number of Monte Carlo Cycles

**tmin** = Start of temperature interval, float

**tmax** = End of temperature interval, float

**tstep** = Increment size for temperature interval, float

<ins>Non parallelized</ins>
~~~
g++  --std=c++11 -O3 -o main.out ./cpp_code/main_unparallel.cpp
~~~
and run with
~~~
./main.out dim mcs temp
~~~
where **dim** and **mcs** are the same of for the parallelized version, and

**temp** = Single temperature to run for, float

The two files /Code/plot_parallel.py and /Code/plot_unparallel.py are Python scripts used to make plots from datafiles generated by the program. These are run automatically when
running main.py.

### Output and datafiles
All output are written to a file called "Averages.dat/.txt". This file will be overwritten each time the program is run, so necessary plotting or renaming of the file is needed
for each run of the program. The datafiles used for the results in the report have been included in the folder ./Code/Data as some of these take up to 20 hours to generate.

### Report 
The report written for this project can be found in ./Article/. In the subfolders /Article/Figur and /Article/Oppsett are all the .tex files and pictures used in the report.

### Unit tests
Since the code for this program is fairly simple and clear, all functions have been included in the same file as the main function. Therefore, the Catch2 unit test library 
couldn't be utilized. The function UnitTests() runs automatically with the unparallelized version of the program, and will output an error in the console if any of the tested 
functions doesn't behave as expected. All functions have been tested like this, except for the function which handles file output.
